# Laravel Backup Shield

[![Latest Version on Packagist][ico-version]][link-packagist]
[![Software License][ico-license]](LICENSE.md)
[![Build Status][ico-travis]][link-travis]
[![Scrutinizer Score][ico-scrutinizer]][link-scrutinizer]

![backup-shield](https://user-images.githubusercontent.com/907114/40528727-3df1dbcc-5ff2-11e8-99d1-7c4c3340ce13.jpg)


## Secure your backups

**This package helps you encrypt and password-protect your backups taken with [Spatie's](https://github.com/spatie) fantastic [spatie/laravel-backup](https://github.com/spatie/laravel-backup)-package.**

Backup Shield simply listens for when the .zip-file generated by Laravel-backup is done, grabs it and applies your password and encryption of your liking.

*Using Laravel 5.2? Check out the [v1 branch](https://github.com/olssonm/laravel-backup-shield/tree/v1).*

## Installation

`composer require olssonm/laravel-backup-shield`

Requires `PHP: "^7.0"` and `laravel/framework: "^5.3"`.

In Laravel > 5.5 the service provider will be automatically added. You can also add the service provider to your app.php manually if needed:

```php
'providers' => [
    Olssonm\Humans\ServiceProvider::class
]
```

## Configuration

Publish your configuration using `php artisan vendor:publish`. Or if you're using a version of Laravel prior to 5.5 via ```php artisan vendor:publish --provider="Olssonm\BackupShield\BackupShieldServiceProvider"```.

You only have the ability to set two different options; password and encryption.

```php
// Default configuration; backup-shield.php
return [
    'password' => env('app.key'),
    'encryption' => \Olssonm\BackupShield\Encryption::ENCRYPTION_DEFAULT
];
```

#### Password

Your password (*duh*). The default is the application key (`APP_KEY` in your .env-file). You might want to set something more appropriate. Remember to use long strings and to keep your password safe – without it you will never be able to open your backup.

Set to `NULL` if you want to keep your backup without a password.

#### Encryption

Set your type of encryption. Available options are:

`\Olssonm\BackupShield\Encryption::ENCRYPTION_DEFAULT` (PKWARE/ZipCrypto)  
`\Olssonm\BackupShield\Encryption::ENCRYPTION_WINZIP_AES_128` (AES 128)  
`\Olssonm\BackupShield\Encryption::ENCRYPTION_WINZIP_AES_192` (AES 192)  
`\Olssonm\BackupShield\Encryption::ENCRYPTION_WINZIP_AES_256` (AES 256)  

Note that macOS among other does *not* support the Winzip AES-encryption methods as standard. You might have to buy a separate app and/or license to decrypt and open the protected file. However, if you have the option for AES 256 you should go with that as ZipCrypto may be weak.

## Testing

``` bash
$ composer test
```

or

``` bash
$ phpunit
```

## License

The MIT License (MIT). Please see the [LICENSE.md](LICENSE.md) for more information.

© 2018 [Marcus Olsson](https://marcusolsson.me).

[ico-version]: https://img.shields.io/packagist/v/olssonm/laravel-backup-shield.svg?style=flat-square
[ico-license]: https://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat-square
[ico-travis]: https://img.shields.io/travis/olssonm/laravel-backup-shield/master.svg?style=flat-square
[ico-downloads]: https://img.shields.io/packagist/dt/olssonm/laravel-backup-shield.svg?style=flat-square
[ico-scrutinizer]: https://img.shields.io/scrutinizer/g/olssonm/laravel-backup-shield.svg?style=flat-square
[link-packagist]: https://packagist.org/packages/olssonm/laravel-backup-shield
[link-travis]: https://travis-ci.org/olssonm/laravel-backup-shield
[link-scrutinizer]: https://scrutinizer-ci.com/g/olssonm/laravel-backup-shield
